include ../_components/mixins.pug

- var title = 'Fusebit'
- var description = 'With Fusebit, quickly integrate your app to other SaaS applications using flexible code blocks, popular API connectors, and hosts your integrations at scale.'
- var og_image = `${site.url}/assets/images/social-thumbnail.png`
- var og_title = ''

block seo_variables
block page_variable

doctype html
html(lang='en' class=(pageClass || ''))
  head
    - const cleanUrl = page.url.replace('.html', '')
    - const path = cleanUrl === '/' ? '' : cleanUrl
    meta(charset='utf-8')
    meta(content='ie=edge' http-equiv='x-ua-compatible')
    meta(name='viewport' content='width=device-width, initial-scale=1, user-scalable=no')
    meta(name='fragment' content='!')
    meta(name='msapplication-TileColor' content='#2b5797')
    meta(name='theme-color' content='#ffffff')
    meta(name='description' content=(description))
    title=(title)
    meta(property='og:title' content=(og_title || title))
    meta(property='og:description' content=(description))
    meta(property='twitter:title' content=(og_title || title))
    meta(property='twitter:description' content=(description))
    meta(property='og:type' content='website')
    meta(property='og:site_name' content='Fusebit')
    meta(property='og:locale' content='en')
    meta(property='og:url' content= `${site.canonicalUrl}${path}`)
    meta(name='twitter:site' content='@fusebitio')
    meta(name='twitter:creator' content='@fusebitio')
    meta(name='twitter:card' content='summary_large_image')
    meta(property='og:image' content=(og_image))
    meta(property='og:image:secure_url' content=(og_image))
    meta(name='twitter:image:src' content=(og_image))
    meta(name='twitter:image:width' content='1024')
    meta(name='twitter:image:height' content='512')
    link(rel='icon' type='image/png' sizes='32x32' href='/favicon-32x32.png')
    link(rel='icon' type='image/png' sizes='16x16' href='/favicon-16x16.png')
    link(rel='apple-touch-icon' sizes='180x180' href='/apple-touch-icon.png')
    link(rel='manifest' href='/site.webmanifest')
    link(rel='mask-icon' href='/safari-pinned-tab.svg' color='#fb310a')
    link(rel="canonical" href= `${site.canonicalUrl}${path}`)
    link(rel="alternate" type="application/rss+xml" title="Fusebit.io Developer Blog RSS Feed" href= `${site.canonicalUrl}/feed.xml`)

    link(rel='stylesheet' href='/assets/vendor/swiper-bundle.min.css')
    script(src='/assets/vendor/swiper-bundle.min.js')

    link(rel='preconnect' href='https://fonts.gstatic.com')
    link(href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600&family=Roboto&family=Sora:wght@300;400;500;600;700;800&display=swap" rel="stylesheet")
    link(href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet")
    link(rel='stylesheet' href='/assets/main.css?' + cacheBust.mainCss)
    link(href='https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css' rel='stylesheet')

    script.
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.fusebit.io/data/js/" + key + ".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="WSACLqGgP5iDXr3iPDubC70ySHfWHWQk";analytics._cdn="https://data.fusebit.io";analytics.SNIPPET_VERSION="4.13.2";
      analytics.load("WSACLqGgP5iDXr3iPDubC70ySHfWHWQk");
      }}();

    script.
      const searchParams = new URLSearchParams(window.location.search);
      if (!searchParams.get('utm_source') && document.referrer) {
        const referrerHostname = new URL(document.referrer).hostname;
        if (referrerHostname !== window.location.hostname) {
          const url = new URL(window.location);
          url.searchParams.set('utm_source', referrerHostname);
          url.searchParams.set('utm_medium', 'referral');
          url.searchParams.set('utm_campaign', 'none');
          window.history.replaceState({}, '', url);
        }
      }

    script.
      (function(h,o,t,j,a,r){
      h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
      h._hjSettings={hjid:2564747,hjsv:6};
      a=o.getElementsByTagName('head')[0];
      r=o.createElement('script');r.async=1;
      r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
      a.appendChild(r);
      })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    script.
      (function(h,o,t,j,a,r){ h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)}; h._hjSettings={hjid:2564747,hjsv:6}; a=o.getElementsByTagName('head')[0]; r=o.createElement('script');r.async=1; r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv; a.appendChild(r); })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    script.
      (function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/v9ncq3ml';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
    script.
      window.addEventListener('load', async () => {
        const res = await fetch('/site.json');

        const site = await res.json();

        window.Intercom("boot", {
          app_id: site.intercomAppId
        });
      })

    script.
      window._vwo_code = window._vwo_code || (function(){
      var account_id=594269,
      settings_tolerance=2000,
      library_tolerance=2500,
      use_existing_jquery=false,
      is_spa=1,
      hide_element='body',

      /* DO NOT EDIT BELOW THIS LINE */
      f=false,d=document,code={use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){
      window.settings_timer=setTimeout(function () {_vwo_code.finish() },settings_tolerance);var a=d.createElement('style'),b=hide_element?hide_element+'{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}':'',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);this.load('https://dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&f='+(+is_spa)+'&r='+Math.random());return settings_timer; }};window._vwo_settings_timer = code.init(); return code; }());
  body

    include ../_components/Modal/Modal
    include ../_components/Modal/ModalSignUp
    include ../_components/Modal/ModalContact
    include ../_components/Modal/ModalPricing
    include ../_components/Header/Header

    main(class=(content ? 'blog' : ''))
      block content

    include ../_components/Footer/Footer

    script(src="/assets/vendor/gsap/gsap.min.js")
    script(src="/assets/vendor/scrollmagic/ScrollMagic.min.js")

    script(src="/assets/vendor/gsap/ScrollTrigger.min.js")
    script(src="/assets/vendor/gsap/ScrollToPlugin.min.js")
    script(src="/assets/vendor/gsap/MotionPathPlugin.min.js")

    script(src="/assets/vendor/scrollmagic/plugins/animation.gsap.min.js")
    script(src="/assets/vendor/scrollmagic/plugins/debug.addIndicators.min.js")

    //- TODO: Review what's the best way to create helpers without putting them in vendor folder
    script(src="/assets/vendor/helpers/dropdown.js")
    script(src="/assets/vendor/helpers/blink.js")
    script(src="/assets/vendor/helpers/sendEvent.js")
    script(src="/assets/vendor/helpers/openModal.js")
    script(src="/assets/vendor/helpers/closeModal.js")
    script(src="/assets/vendor/helpers/handleClickButtonsGroup.js")
    script(src="/assets/vendor/helpers/openModalFromHash.js")
    script(src="/assets/vendor/helpers/handleShowMore.js")
    script(src="/assets/vendor/helpers/calculateCardsHeight.js")
    script(src="/assets/vendor/shuffle.js")
    script(src="https://unpkg.com/@popperjs/core@2")

    //- script(src='/assets/vendor.js?' + cacheBust.vendorJs)
    script(src='/assets/main.js?' + cacheBust.mainJs)

    block scripts

